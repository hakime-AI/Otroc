{% extends "base.html.twig" %}
{% block pagetitle %}Modification d'une Annonce N°:{{annonce.id}}

{% endblock %}
{% block css %}

	<link rel="stylesheet" href="../public/css/style-form.css">
{% endblock %}
{% set compteur=1 %}


{% block header %}
	<navbar>
		<a href="../../Otroc/"><img class="logo" src="../public/img/logo.png"></a>
		<span>Vendez vos Stocks!!</span>
		<a class="nav" href="../../Otroc/">RETOUR</a>


	</navbar>
{% endblock %}

{% block recherche %}{% endblock %}


{% block body %}
	<main>
		<form action="" method="post" enctype="multipart/form-data">
			<div class="ContainerForm">
				<div class="card1">
					<label for="titre">Titre:</label>
					<input type="text" name="nom" id="nom" placeholder="Titre de l'annonce" required value="{{annonce.nom}}">
					<!--<label for="categorie">Catégorie:</label>
					<input type="text" name="categorie" id="catégorie" placeholder="catégorie" value="{{ annonce.categorie }}"><br>
					-->
					<label for="prix">Prix:</label>
					<input type="float" name="prix" id="prix" placeholder="prix" required value="{{ annonce.prix}}" min="0" step="any">
					<label for="mail">Email:</label>
					<input type="mail" name="email" id="email" placeholder="email pour vous joindre" required value="{{annonce.email}}">
				</div>
				<div class="card1">
					<label for="description">Description:</label>
					<textarea name="description"  cols="50" rows="20" id="description" value="{{annonce.description}}">{{ annonce.description}}</textarea><br>
					<br>
				</div>
			</div>
			<div
				class="containerImage">
				<!--card 0-->
				<div class="card1">
					<label for="photo0">
						<figure>
							<input class="inputimage" type="file" onchange="handleFiles(files,0)" name="photo0" id="photo0">
							<span id="preview0">
								<img class="vignette" src="{{annonce.photo0?'%s/%s%s/%s'|format('../public/img',annonce.email,annonce.id,annonce.photo0):'%s/%s'|format('../public/img','vide.jpg')}}" alt="image1">
							</span>
							<figcaption align="center">Photo0</figcaption>
						</figure>
					</label>
				</div>
				<!--card 1 -->
				<div class="card1">
					<label for="photo1">
						<input class="inputimage" type="file" onchange="handleFiles(files,1)" name="photo1" id="photo1">
						<figure>
							<span id="preview1">
								<img class="vignette" src="{{annonce.photo1?'%s/%s%s/%s'|format('../public/img',annonce.email,annonce.id,annonce.photo1):'%s/%s'|format('../public/img','vide.jpg')}}" alt="photo2">
							</span>
							<figcaption align="center">Photo1</figcaption>
						</figure>
					</label>
				</div>
				<!--card 2 -->
				<div class="card1">
					<label for="photo2">
						<input class="inputimage" type="file" onchange="handleFiles(files,2)" name="photo2" id="photo2">
						<figure>
							<span id="preview2">
								<img class="vignette" src="{{annonce.photo2?'%s/%s%s/%s'|format('../public/img',annonce.email,annonce.id,annonce.photo2):'%s/%s'|format('../public/img','vide.jpg')}}" alt="photo3">
							</span>
						<figcaption align="center">Photo2</figcaption>
						</figure>
					</label>
				</div>
				<!--card 3 -->
				<div class="card1">
					<label for="photo3">
						<input class="inputimage" type="file" onchange="handleFiles(files,3)" name="photo3" id="photo3">
						<figure>
							<span id="preview3">
								<img class="vignette" src="{{annonce.photo3?'%s/%s%s/%s'|format('../public/img',annonce.email,annonce.id,annonce.photo3):'%s/%s'|format('../public/img','vide.jpg')}}" alt="photo4">
							</span>
						<figcaption align="center">Photo3</figcaption>
						</figure>
					</label>
				</div>
				<!--card 4 -->
				<div class="card1">
					<label for="photo4">
						<input class="inputimage" type="file" onchange="handleFiles(files,4)" name="photo4" id="photo4">
						<figure>
							<span id="preview4">
								<img class="vignette" src="{{annonce.photo4?'%s/%s%s/%s'|format('../public/img',annonce.email,annonce.id,annonce.photo4):'%s/%s'|format('../public/img','vide.jpg')}}" alt="photo{{i}}">
							</span>
							<figcaption align="center">Photo0</figcaption>
						</figure>
					</label>
				</div>

			</div>
			<div class="containerBoutton">
				<button type="submit">Modifier</button>
				<button type="reset">Annuler</button>
			</div>
		</form>
	</main>
{% endblock %}
{% block script %}
	<script type="text/javascript">
		function handleFiles(files, valeur) {
var imageType = /^image\//;
for (var i = 0; i < files.length; i++) {
var file = files[i];
if (! imageType.test(file.type)) {
alert("veuillez sélectionner une image");
} else {
if (i == 0) {
switch (valeur) {
case 0:
preview0.innerHTML = '';
break;
case 1:
preview1.innerHTML = '';
break;
case 2:
preview2.innerHTML = '';
break;
case 3:
preview3.innerHTML = '';
break;
case 4:
preview4.innerHTML = '';
break;
}

}
var img = document.createElement("img");
img.classList.add("obj");
img.file = file;
switch (valeur) {
case 0:
preview0.appendChild(img);
break;
case 1:
preview1.appendChild(img);
break;
case 2:
preview2.appendChild(img);
break;
case 3:
preview3.appendChild(img);
break;
case 4:
preview4.appendChild(img);
break;
}

var reader = new FileReader();
reader.onload = (function (aImg) {
return function (e) {
aImg.src = e.target.result;
};
})(img);

}

reader.readAsDataURL(file);
}

}
</script>
{% endblock %}
{% block footer %}
	<footer></footer>
{% endblock %}
